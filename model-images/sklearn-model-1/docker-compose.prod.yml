# Only build all trainer and server images for the router
# The router will launch the trainer and server containers later on demand
#

services:
  trainer-sklearn-model-1:
    build:
      context: .
      dockerfile: docker_build/Dockerfile_training
    image: trainer-sklearn-model-1:${TAG:-latest}
  server-sklearn-model-1:
    build:
      context: .
      dockerfile: docker_build/Dockerfile_serve
    image: server-sklearn-model-1:${TAG:-latest}
    environment:
      - MLFLOW_TRACKING_URI=http://mlflow:5000
      - REGISTERED_MODEL_NAME=DiabetesRF
